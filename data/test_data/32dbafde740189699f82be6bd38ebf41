{
  "lead": "Reading your reactions to our World Cup 2010 Twitter replay visualization made me smile. There's no better affirmation for a web project than seeing it reach people around the world. With readers of every competing nation taking an interest, I thought it might be worth describing how we put it together. As with football, teamwork is everything",
  "id": "help/insideguardian/2010/jun/17/world-cup-twitter-replay",
  "class": null,
  "title": "World Cup instant Twitter replay: how we did it",
  "core-words": {
    "reaction": 1,
    "start": 4,
    "get": 1,
    "animate": 1,
    "initial": 1,
    "order": 1,
    "compete": 1,
    "place": 1,
    "twitter": 1,
    "represent": 2,
    "app": 2,
    "analyse": 1,
    "site": 1,
    "recap": 1,
    "team": 3,
    "figure": 1,
    "flow": 1,
    "design": 2,
    "cup": 1,
    "help": 1,
    "teamwork": 1,
    "video": 1,
    "smile": 1,
    "tournament": 1,
    "see": 1,
    "info": 1,
    "game": 2,
    "word": 4,
    "aggregate": 1,
    "produce": 1,
    "football": 2,
    "think": 1,
    "calculate": 1,
    "specific": 1,
    "project": 1,
    "load": 1,
    "like": 1,
    "capture": 1,
    "pull": 1,
    "mad": 1,
    "instant": 1,
    "collect": 1,
    "field": 1,
    "goal": 1,
    "engine": 1,
    "product": 1,
    "affirmation": 1,
    "stat": 1,
    "timeline": 2,
    "card": 1,
    "solution": 1,
    "render": 1,
    "read": 1,
    "complete": 1,
    "change": 2,
    "nation": 1,
    "view": 1,
    "relay": 1,
    "shift": 1,
    "popular": 1,
    "build": 2,
    "main": 1,
    "visualization": 1,
    "replay": 4,
    "provide": 2,
    "tweet": 1,
    "system": 1,
    "summary": 2,
    "interest": 1,
    "number": 1,
    "duration": 1,
    "good": 1,
    "generate": 1,
    "supplementary": 1,
    "time": 4,
    "manager": 1,
    "appropriate": 1,
    "panel": 1,
    "record": 1,
    "interactive": 2,
    "corner": 1,
    "scrubber": 1,
    "way": 1,
    "physics": 1,
    "people": 1,
    "world": 1,
    "describe": 2,
    "popularity": 3,
    "animated": 1,
    "existent": 1,
    "reach": 1,
    "match": 5,
    "minute": 3,
    "page": 1,
    "use": 1,
    "series": 1,
    "take": 1,
    "event": 1,
    "window": 1,
    "put": 1,
    "datum": 4,
    "worth": 1,
    "feed": 3,
    "frame": 1,
    "large": 1,
    "reader": 1,
    "information": 1,
    "web": 2,
    "sample": 1,
    "heart": 1,
    "control": 1,
    "major": 1,
    "grips": 1,
    "require": 1,
    "graphically": 1,
    "data": 2
  },
  "words": {
    "circle": 2,
    "jump": 2,
    "rest": 2,
    "tournament": 5,
    "initial": 1,
    "text": 1,
    "place": 3,
    "gap": 1,
    "express": 1,
    "information": 3,
    "team": 10,
    "devil": 1,
    "thankfully": 1,
    "context": 2,
    "less": 1,
    "teamwork": 2,
    "programming": 1,
    "animate": 2,
    "great": 2,
    "roll": 1,
    "graphically": 2,
    "probably": 1,
    "football": 3,
    "think": 2,
    "appropriate": 3,
    "people": 3,
    "press": 1,
    "possibly": 1,
    "expand": 1,
    "sick": 1,
    "index": 1,
    "detail": 1,
    "whiteboard": 1,
    "user": 2,
    "engine": 2,
    "layout": 3,
    "surround": 1,
    "stat": 1,
    "box2d": 1,
    "font": 1,
    "explosion": 1,
    "linking": 1,
    "stage": 1,
    "render": 1,
    "relevant": 1,
    "view": 1,
    "indication": 1,
    "position": 1,
    "mr": 1,
    "specific": 3,
    "pull": 2,
    "add": 1,
    "dynamic": 1,
    "interest": 2,
    "good": 2,
    "object": 1,
    "format": 1,
    "holiday": 1,
    "record": 1,
    "discover": 1,
    "case": 1,
    "look": 1,
    "describe": 3,
    "come": 1,
    "animated": 1,
    "accurate": 1,
    "interactive": 5,
    "activity": 3,
    "calculation": 2,
    "set": 1,
    "timezone": 1,
    "ready": 2,
    "create": 1,
    "wise": 1,
    "vital": 1,
    "window": 2,
    "kick": 1,
    "scheduling": 1,
    "energy": 1,
    "file": 1,
    "sample": 1,
    "design": 4,
    "stalwart": 1,
    "grips": 1,
    "step": 1,
    "fan": 1,
    "model": 1,
    "furthermore": 1,
    "site": 2,
    "launch": 1,
    "moment": 1,
    "order": 2,
    "state": 1,
    "twitter": 2,
    "finish": 1,
    "editorial": 1,
    "tide": 1,
    "simple": 1,
    "sport": 2,
    "valiant": 1,
    "figure": 1,
    "pass": 1,
    "crowd": 1,
    "series": 2,
    "boys": 1,
    "dev": 1,
    "original": 1,
    "whilst": 2,
    "drive": 1,
    "cat": 1,
    "deep": 1,
    "info": 1,
    "game": 7,
    "replay": 8,
    "select": 1,
    "project": 4,
    "root": 1,
    "enable": 1,
    "decide": 1,
    "possible": 1,
    "know": 3,
    "live": 1,
    "system": 2,
    "return": 1,
    "collect": 2,
    "problem": 5,
    "discuss": 1,
    "service": 1,
    "herding": 1,
    "action": 1,
    "affirmation": 2,
    "rely": 1,
    "world": 2,
    "solution": 2,
    "browser": 1,
    "realize": 1,
    "swiftly": 1,
    "deadline": 1,
    "store": 2,
    "past": 1,
    "build": 3,
    "representation": 1,
    "undertake": 1,
    "tweet": 4,
    "feel": 1,
    "number": 3,
    "smile": 2,
    "thank": 1,
    "library": 1,
    "graphic": 3,
    "mathematical": 1,
    "standard": 1,
    "critical": 1,
    "delve": 1,
    "fall": 1,
    "individual": 1,
    "work": 4,
    "need": 3,
    "coverage": 1,
    "new": 1,
    "progress": 1,
    "popularity": 5,
    "contain": 1,
    "right": 2,
    "guy": 1,
    "stroll": 1,
    "overcome": 1,
    "match": 7,
    "minute": 6,
    "page": 2,
    "assemble": 1,
    "hard": 1,
    "ponder": 1,
    "round": 1,
    "underestimate": 1,
    "coax": 1,
    "hat": 1,
    "frame": 2,
    "go": 2,
    "reader": 2,
    "swfaddress": 1,
    "manual": 1,
    "physics": 2,
    "list": 1,
    "packed": 1,
    "brief": 1,
    "constantly": 1,
    "get": 4,
    "difficult": 1,
    "narrative": 1,
    "little": 2,
    "represent": 4,
    "app": 2,
    "summary": 3,
    "crucially": 1,
    "rewind": 1,
    "flow": 1,
    "involve": 2,
    "cup": 1,
    "help": 4,
    "intervention": 1,
    "accord": 2,
    "realtime": 1,
    "fortunately": 1,
    "penalty": 1,
    "aggregate": 1,
    "equivalent": 1,
    "final": 1,
    "distinct": 2,
    "result": 1,
    "calculate": 2,
    "version": 2,
    "depth": 1,
    "overlap": 1,
    "draw": 2,
    "like": 1,
    "compete": 2,
    "capture": 2,
    "man": 1,
    "task": 1,
    "engaging": 2,
    "instant": 1,
    "c": 1,
    "sense": 2,
    "move": 1,
    "field": 1,
    "resultant": 1,
    "goal": 2,
    "tale": 1,
    "enhance": 1,
    "present": 1,
    "ball": 2,
    "card": 1,
    "tight": 1,
    "enumerate": 1,
    "shootout": 1,
    "feature": 1,
    "complete": 2,
    "require": 3,
    "start": 7,
    "relay": 1,
    "hub": 1,
    "shift": 1,
    "score": 1,
    "main": 2,
    "particularly": 1,
    "release": 1,
    "aware": 1,
    "duration": 1,
    "fast": 2,
    "generate": 1,
    "kind": 1,
    "supplementary": 1,
    "scrubber": 1,
    "say": 1,
    "challenging": 1,
    "finally": 2,
    "make": 1,
    "sort": 2,
    "way": 2,
    "plan": 1,
    "developer": 1,
    "mad": 1,
    "able": 1,
    "would": 1,
    "vary": 1,
    "existent": 1,
    "reach": 2,
    "fantastic": 2,
    "freedom": 1,
    "fill": 1,
    "magic": 1,
    "rescue": 1,
    "nice": 1,
    "keep": 2,
    "produce": 1,
    "importance": 1,
    "feed": 5,
    "story": 1,
    "assign": 1,
    "read": 2,
    "point": 1,
    "heart": 1,
    "control": 1,
    "run": 1,
    "reaction": 2,
    "animation": 1,
    "helpful": 1,
    "lie": 1,
    "change": 4,
    "country": 1,
    "date": 1,
    "lose": 1,
    "execute": 1,
    "conclude": 1,
    "timeline": 4,
    "later": 1,
    "analyse": 1,
    "mess": 2,
    "kudo": 1,
    "challenge": 3,
    "fun": 1,
    "whizz": 1,
    "take": 3,
    "popular": 3,
    "bubble": 3,
    "key": 1,
    "spirit": 1,
    "unfold": 1,
    "video": 1,
    "swollen": 1,
    "speed": 1,
    "see": 3,
    "incorporate": 2,
    "central": 1,
    "word": 10,
    "ne": 1,
    "ambitious": 1,
    "pause": 1,
    "ensure": 1,
    "provide": 3,
    "maintain": 1,
    "mind": 1,
    "include": 1,
    "relative": 1,
    "load": 2,
    "slurps": 1,
    "clear": 1,
    "agree": 1,
    "stand": 2,
    "supply": 1,
    "worth": 2,
    "occasion": 1,
    "prepare": 1,
    "real": 2,
    "use": 1,
    "web": 3,
    "nation": 2,
    "door": 1,
    "drastically": 1,
    "single": 1,
    "colour": 1,
    "data": 5,
    "visualization": 3,
    "transition": 1,
    "enlist": 1,
    "happen": 2,
    "solve": 3,
    "big": 2,
    "emerge": 1,
    "interactif": 1,
    "requisite": 1,
    "pedigree": 1,
    "tweak": 2,
    "manager": 1,
    "watch": 2,
    "allow": 1,
    "hand": 4,
    "corner": 1,
    "recap": 1,
    "code": 2,
    "approach": 2,
    "convey": 1,
    "consistent": 1,
    "question": 1,
    "manage": 1,
    "sketch": 1,
    "sit": 1,
    "reasonably": 1,
    "value": 1,
    "mention": 1,
    "thing": 4,
    "manner": 1,
    "production": 1,
    "event": 1,
    "large": 1,
    "put": 1,
    "datum": 9,
    "panel": 1,
    "job": 1,
    "product": 1,
    "time": 9,
    "roar": 1,
    "precedent": 1,
    "size": 3,
    "major": 1,
    "process": 1
  },
  "tags": [
    "football/worldcup2010",
    "football/football",
    "technology/twitter",
    "technology/technology",
    "football/world-cup-football"
  ],
  "content": "Reading your reactions to our World Cup 2010 Twitter replay visualization made me smile. There's no better affirmation for a web project than seeing it reach people around the world. With readers of every competing nation taking an interest, I thought it might be worth describing how we put it together. As with football, teamwork is everything. The project kicked off a few months ago with a simple but challenging brief: \"Can we make a distinct and engaging representation of Twitter activity during the World Cup?\" The last few years have seen some fantastic Twitter visualizations using all sorts of approaches. Standing out would be difficult. That said, whilst many of these are great fun, only a few convey a sense of context or capture the spirit of popular occasions. Looking at these precedents it became clear that two key problems must be overcome. One, the tide of Twitter activity needed to be stored and made sense of throughout the tournament. Two, the resultant data should be presented without losing the energy of each tweet it was made up from. I pondered all this on holiday and returned with a plan. A system that samples the shifting popularity of words could record and relay data to an app that animates these changes over time. With this approach, we could create the data-driven equivalent of a fast action replay for every game in the tournament. If we got it right, people might see the roar of the crowd passing through Twitter. The first step in making this happen was enlisting the help of our Java team. In order to capture and analyse tweets minute-by-minute throughout the cup, Francis Rhys-Jones got to grips with the Twitter API and started putting together a web app. At root, a scheduling system slurps relevant tweets and adds them to a full-text index. A further task calculates the twenty most popular words every minute and stores the results. Finally, a REST service enumerates this data in JSON format for a required window in time. The next challenge was in some ways the most critical. Having collected the data, how could we represent it in a distinct and engaging manner? My original sketch had several problems. It relied upon being able to assign every word of every tweet to a specific team. It supplied little context about what was happening in the game. It involved the dynamic layout of a list of words whose sizes and positions were constantly changing. Fortunately, our graphics team were on hand to help sort things out. After some wise words from Paddy Allen and Michael Robinson, Mark McCormick strolled up to the whiteboard and drew the first version of our expanding bubble layout. By placing the bubbles around a central hub containing the score, he solved two problems at once. Nice. As these graphics progressed, country and timeline information were incorporated to enhance the narrative pull. Finally, Andy Brockie and the editorial design team tweaked the fonts and colours to keep things consistent with the rest of our World Cup coverage. As ever, having some graphics in place really got things moving. We swiftly realized our next problem \u2013 the team info and timeline panels in the design required data to feed them. Our football mad product manager, Alex Liesche, had the solution: a large number of our existent match and tournament pages on the site are generated from feeds provided by ESA. Once a match is completed, they provide a full summary of teams fielded and major game events like goals, cards and corners. The Java guys then coaxed the requisite tournament data into a single summary and the stage was set. The biggest job throughout this process fell to one man. Martin Shuttleworth is a fantastic Flash developer who I've worked with a number of times in the past. Once the designs were ready and the various data feeds agreed, we sat down and discussed how the interactive itself would work. On start up, the appropriate data would be loaded and assembled to model the tournament. A match browser would enable any completed game to be selected for replay. Once the game summary was loaded, the appropriate time window would be calculated and a call made to the word popularity API. With all the data in place, the main view could be built and the match replay started. Data flow would be controlled from an interactive timeline representing the match duration in the same way a video scrubber might. Replay would whizz through at sixty times real speed, so 90 minutes could be watched in 90 seconds. Users would have the freedom to pause, rewind or jump to a specific moment in time. At the heart of all this we have a series of data frames, each one describing the 20 most popular words for a specific minute in time. Each frame could be represented graphically as a series of bubbles sized according to word popularity. Transitioning from one minute to another would be a question of animating the change from one state to the next. At this point, I should probably mention where the real magic lies. If you've ever watched someone drawing a packed circle layout by hand, you'll know it takes some time. The circles must all be sized according to their relative values but never overlap. Our code would need to make these calculations more or less in realtime. Word popularity could vary drastically from one minute to the next, particularly if a user was jumping around the timeline at will. The solution, I knew, would involve a physics engine. Box2D has a great pedigree, having started off as a C library for games programming. Furthermore, AVM2 is reasonably fast when executing mathematical calculations. Still, keeping our balls in order was going to be a big challenge. To my mind, Martin not only solved this problem, he managed to solve it so that the animation feels right. In lesser hands, the explosions of activity surrounding each goal might have become a swollen mess. Hats off to Mr Shuttleworth. To recap: we started by figuring out how to collect aggregate stats from Twitter, produced an initial design for representing this data graphically, pulled together some supplementary feeds of match and team information and then started to build an interactive that uses a physics engine to help render animated replays of the changes in word popularity over time. What else could possibly be required? As always, the devil was in the detail. Once we started to work with the ESA feeds, we discovered that they didn't include all the information we needed. Most crucially, they provided no accurate indication of when matches were finished or how penalty shootouts unfolded. Thankfully, our ever helpful Central production and sport teams came to the rescue. Paul Torpey and the sport team undertook to maintain a number of Google Docs that would fill in all the gaps in the ESA data. One should never underestimate the importance of this kind of manual intervention. With the project running to such a tight deadline, we would have been hard pressed to get things done otherwise. Two final challenges emerged just as we were preparing to go live. On one hand, I delved into the depths of Flash's Date object to ensure that everything would work in every possible timezone. On the other, we'd decided to allow deep linking of individual games using swfaddress. This isn't a standard feature of our interactive pages and we weren't due to release a new version of the main site code for at least another week. Kudos in this case goes to dev team stalwarts Grant Klopper and Tony McCrae who incorporated the appropriate JavaScript file through a little known back door. One last round of tweaks later, we had a build of the interactive ready for launch. So there it is \u2013 the story of one of our more ambitious interactives. To conclude this tale, I must also express thanks to Sean Clarke and Igor Clark, whose ever valiant cat herding was vital in getting much of this done, and Giles Anderton who kept the balls rolling whilst I was off sick. As all Beach Boys fans are aware, you need a mess of help to stand alone."
}